#########################################################
# builds a base image with the jdk, maven and some tools
#########################################################
# docker build -f DockerfileJdkMvn -t maxant/jdkmvn .
# docker run --rm -it -v $(pwd):/project maxant/jdkmvn mvn --version
# docker run --rm -it -v objects:/project maxant/jdkmvn mvn clean install

FROM openjdk:11.0.7-slim-buster

RUN apt update
RUN apt upgrade
RUN apt install -y curl
RUN apt install -y wget
RUN apt install -y less

# doesnt work for some reason: RUN apt install -y maven
# therefore: https://tecadmin.net/install-apache-maven-on-debian/
WORKDIR /usr/local
RUN wget http://www-eu.apache.org/dist/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz
RUN tar xzf apache-maven-3.6.3-bin.tar.gz
RUN ln -s apache-maven-3.6.3 apache-maven
ENV JAVA_HOME=/usr/local/openjdk-11
ENV M2_HOME=/usr/local/apache-maven
ENV MAVEN_HOME=/usr/local/apache-maven
ENV PATH=${M2_HOME}/bin:${PATH}

RUN echo "alias la='ls -la'" >> ~/.bashrc

RUN mkdir /project
WORKDIR /project

CMD /bin/bash
